{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var h=Object.create;var n=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var t=s=>n(s,\"__esModule\",{value:!0});var o=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),x=(s,e)=>{t(s);for(var c in e)n(s,c,{get:e[c],enumerable:!0})},w=(s,e,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of p(e))!N.call(s,l)&&l!==\"default\"&&n(s,l,{get:()=>e[l],enumerable:!(c=r(e,l))||c.enumerable});return s},v=s=>w(t(n(s!=null?h(m(s)):{},\"default\",s&&s.__esModule&&\"default\"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s);var d=o((j,i)=>{i.exports=_jsx_runtime});var b={};x(b,{default:()=>f,frontmatter:()=>g});var a=v(d()),g={title:\"node\\u5B9E\\u73B0\\u4E00\\u4E2A\\u7B80\\u6613git-rm\",date:new Date(1628332983e3),category:\"git\",tags:[\"2021\",\"git\"],draft:!1};function u(s){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",code:\"code\",ol:\"ol\",li:\"li\",pre:\"pre\",div:\"div\"},s.components),{wrapper:c}=e,l=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.h2,{id:\"\\u524D\\u7F6E\\u77E5\\u8BC6\",children:[(0,a.jsx)(e.a,{href:\"#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u524D\\u7F6E\\u77E5\\u8BC6\"]}),`\n`,(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:\"git rm\"}),\"\\u53EF\\u4EE5\\u7406\\u89E3\\u4E3A\",(0,a.jsx)(e.code,{children:\"rm\"}),\"+\",(0,a.jsx)(e.code,{children:\"git add\"}),\",\\u8FD9\\u91CC\\u9700\\u8981\\u5904\\u7406\\u4E00\\u4E2A\\u5F02\\u5E38\\uFF0C\\u5C31\\u662F\\u6682\\u5B58\\u533A\\u7684\\u6587\\u4EF6\\u5DF2\\u7ECF\\u66F4\\u65B0\\u5C31\\u4E0D\\u80FD\\u5220\\u9664\"]}),`\n`,(0,a.jsxs)(e.h2,{id:\"\\u6E90\\u7801\\u7B80\\u5355\\u5B9E\\u73B0\",children:[(0,a.jsx)(e.a,{href:\"#%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u6E90\\u7801\\u7B80\\u5355\\u5B9E\\u73B0\"]}),`\n`,(0,a.jsx)(e.p,{children:\"\\u5B9E\\u73B0\\u601D\\u8DEF\\uFF1A\"}),`\n`,(0,a.jsx)(e.p,{children:\"\\u8981\\u5220\\u9664\\u7684\\u6587\\u4EF6\\u5982\\u679C\\u6CA1\\u6709\\u5728\\u6682\\u5B58\\u533A\\uFF0C\\u76F4\\u63A5\\u5220\\u9664\\uFF0C\\u5982\\u679C\\u5DF2\\u7ECF\\u5728\\u6682\\u5B58\\u533A\\u4E86\\uFF0C\\u5206\\u4E24\\u79CD\\u60C5\\u51B5\\uFF1A\"}),`\n`,(0,a.jsxs)(e.ol,{children:[`\n`,(0,a.jsx)(e.li,{children:\"\\u521A\\u521D\\u59CB\\u5316\\u7684\\u4ED3\\u5E93\\uFF0C\\u8FD8\\u6CA1\\u6709commit\\uFF0C\\u90A3\\u6682\\u5B58\\u533A\\u7684\\u6587\\u4EF6\\u80AF\\u5B9A\\u662F\\u5DF2\\u7ECF\\u66F4\\u65B0\\u8FC7\\u7684\\u4E86\\uFF0C\\u4E0D\\u80FD\\u5220\\u9664\"}),`\n`,(0,a.jsx)(e.li,{children:\"\\u5DF2\\u7ECF\\u6709\\u8FC7commit\\u8FC7\\u7684\\u4ED3\\u5E93\\uFF0C\\u5148\\u627E\\u5230\\u5F53\\u524D\\u5206\\u652F\\u7684commitID\\uFF0C\\u6839\\u636EcommitID\\u91CC\\u7684\\u9876\\u5C42\\u6811\\u5BF9\\u8C61\\u627E\\u5230\\u6240\\u6709\\u6587\\u4EF6\\u4FE1\\u606F\\uFF0C\\u5BF9\\u6BD4\\u6700\\u540E\\u4E00\\u6B21\\u63D0\\u4EA4\\u91CC\\u7684\\u6587\\u4EF6hash\\u548C\\u6682\\u5B58\\u533A\\u7684\\u6587\\u4EF6hash\\uFF0C\\u5982\\u679C\\u4E00\\u81F4\\uFF0C\\u76F4\\u63A5\\u5220\\u9664\\uFF0C\\u4E0D\\u4E00\\u81F4\\uFF0C\\u6587\\u4EF6\\u5DF2\\u7ECF\\u53D8\\u66F4\\uFF0C\\u4E0D\\u80FD\\u5220\\u9664\"}),`\n`]}),`\n`,(0,a.jsx)(e.p,{children:\"\\u5982\\u679C\\u8981\\u5220\\u9664\\u7684\\u6587\\u4EF6\\u4E0D\\u5B58\\u5728\\uFF0C\\u76F4\\u63A5\\u8FD4\\u56DE\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-js\",children:(0,a.jsxs)(e.code,{className:\"language-js\",children:[(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" fs \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-blue\",children:\"require\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'fs'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" path \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-blue\",children:\"require\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'path'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"}),\" isString \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-blue\",children:\"require\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'lodash'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" gitDir \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"process\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"cwd\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'.ngit'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsx)(e.div,{className:\"code-line\",children:`\n`}),(0,a.jsx)(e.div,{className:\"code-line\",children:(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u83B7\\u53D6\\u6587\\u4EF6\\u76F8\\u5BF9\\u8DEF\\u5F84\"})}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" relativeFilePath \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"relative\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"process\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"cwd\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"process\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"cwd\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" filePath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsx)(e.div,{className:\"code-line\",children:(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u6587\\u4EF6\\u4E0D\\u5B58\\u5728\\uFF0C\\u76F4\\u63A5\\u8FD4\\u56DE\"})}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"if\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"\",children:\"!\"}),\"fs\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"existsSync\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"process\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"cwd\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" filePath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"return\"}),\" \",(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"`\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"pathspec \"}),(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"${\"}),\"filePath\",(0,a.jsx)(e.span,{className:\"\",children:\"}\"})]}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\" did not match any files\"}),(0,a.jsx)(e.span,{className:\"\",children:\"`\"})]})]}),(0,a.jsx)(e.div,{className:\"code-line\",children:(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"})}),(0,a.jsx)(e.div,{className:\"code-line\",children:(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// index \\u6570\\u636E\\u8F6C object  index \\u4E2D\\u7684 object { 'test/file': '7317399078361350034a7b769c6ea479ca1ebc4a' }\"})}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" idx \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" fs\"]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"readFileSync\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"gitDir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'index'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'utf8'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"split\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'\\\\n'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"filter\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"\",children:\"i\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=>\"}),\" i\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"reduce\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsxs)(e.span,{className:\"\",children:[\"acc\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" cur\"]}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=>\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    acc\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),\"cur\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"split\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"' '\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),(0,a.jsx)(e.span,{className:\"\",children:\"2\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" cur\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"split\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"' '\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),(0,a.jsx)(e.span,{className:\"\",children:\"0\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"return\"}),\" acc\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsx)(e.div,{className:\"code-line\",children:(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// index \\u4E2D\\u5339\\u914D\\u5230\\u7684\\u6587\\u4EF6\"})}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" matchedFile \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"Object\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"keys\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"idx\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"find\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"\",children:\"p\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=>\"}),\" p \",(0,a.jsx)(e.span,{className:\"\",children:\"===\"}),\" relativeFilePath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsx)(e.div,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"if\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"\",children:\"!\"}),\"matchedFile\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u5220\\u9664\\u6587\\u4EF6\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  fs\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"unlinkSync\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"process\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"cwd\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" filePath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"return\"}),\" \",(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"`\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"rm \"}),(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"${\"}),\"relativeFilePath\",(0,a.jsx)(e.span,{className:\"\",children:\"}\"})]}),(0,a.jsx)(e.span,{className:\"\",children:\"`\"})]}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsx)(e.div,{className:\"code-line\",children:(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"})}),(0,a.jsx)(e.div,{className:\"code-line\",children:(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u5BF9\\u6BD4index \\u4E2D\\u7684hash\\u5BF9\\u8C61 \\u548C heads\\u4E2D\\u7684 hash \\u5BF9\\u8C61\\uFF0C\\u627E\\u5230\\u5DF2\\u7ECF\\u53D8\\u66F4\\u7684\\u6587\\u4EF6\\u5217\\u8868\"})}),(0,a.jsx)(e.div,{className:\"code-line\",children:(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u5148\\u627E\\u5230\\u5F53\\u524D\\u5206\\u652F\"})}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" currentBranch \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" fs\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"readFileSync\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"gitDir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'HEAD'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'utf8'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"match\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'ref: (refs/heads/.+)'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),(0,a.jsx)(e.span,{className:\"\",children:\"1\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsx)(e.div,{className:\"code-line\",children:(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// 1. \\u5206\\u652F\\u6307\\u5411\\u5B58\\u5728 \\u5DF2\\u7ECF\\u63D0\\u4EA4\\u8FC7\\uFF0C\\u6682\\u5B58\\u533A\\u6587\\u4EF6hash \\u548C \\u4E0A\\u6B21\\u63D0\\u4EA4\\u6811hash \\u5BF9\\u6BD4   2. \\u5206\\u652F\\u6307\\u5411\\u4E0D\\u5B58\\u5728 \\u76F4\\u63A5\\u8FD4\\u56DE\\u4E0D\\u80FD\\u5220\\u9664\"})}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"if\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"fs\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"existsSync\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"gitDir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" currentBranch\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u83B7\\u53D6\\u5F53\\u524D\\u5206\\u652F\\u7684commitId\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" currentCommitId \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" fs\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"readFileSync\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"gitDir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" currentBranch\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'utf8'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u6839\\u636E\\u5F53\\u524D\\u5206\\u652F\\u7684commitId \\u53CD\\u63A8\\u51FA\\u5F53\\u524D \\u6811\\u5BF9\\u8C61 {a: {b: 1}}\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"getTreeObjectByTreeHash\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"\",children:\"treeHash\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=>\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" treeObject \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" objectPath \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"gitDir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'objects'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" treeHash\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    fs\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"readFileSync\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"objectPath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'utf8'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"split\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'\\\\n'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"filter\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"\",children:\"i\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=>\"}),\" i\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"forEach\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"\",children:\"line\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=>\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"      \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" lineTokens \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" line\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"split\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"/\"}),(0,a.jsx)(e.span,{className:\"\",children:\" \"}),(0,a.jsx)(e.span,{className:\"\",children:\"/\"})]}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"      treeObject\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),\"lineTokens\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),(0,a.jsx)(e.span,{className:\"\",children:\"2\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" lineTokens\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),(0,a.jsx)(e.span,{className:\"\",children:\"0\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"===\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'tree'\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"?\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-blue\",children:\"getTreeObjectByTreeHash\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"lineTokens\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),(0,a.jsx)(e.span,{className:\"\",children:\"1\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\":\"}),\" lineTokens\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),(0,a.jsx)(e.span,{className:\"\",children:\"1\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"return\"}),\" treeObject\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" treeHash \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" fs\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"readFileSync\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"gitDir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'objects'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" currentCommitId\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'utf8'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"split\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'\\\\n'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),(0,a.jsx)(e.span,{className:\"\",children:\"0\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"split\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'tree '\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),(0,a.jsx)(e.span,{className:\"\",children:\"1\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" currentTreeObj \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-blue\",children:\"getTreeObjectByTreeHash\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"treeHash\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// {a: {b: 1}} => {'a/b': 1}\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" flattenTree \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"tree\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" obj \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" prefix \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"''\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=>\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    \",(0,a.jsx)(e.span,{className:\"\",children:\"Object\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"keys\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"tree\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"forEach\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"\",children:\"dir\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=>\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"      \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" filePath \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"join\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"prefix\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" dir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"      \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"if\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-blue\",children:\"isString\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"tree\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),\"dir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"        obj\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),\"filePath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" tree\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),\"dir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"      \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"else\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"        \",(0,a.jsx)(e.span,{className:\"text-code-blue\",children:\"flattenTree\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"tree\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),\"dir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" obj\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" filePath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"      \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"return\"}),\" obj\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// refs/master \\u4E2D\\u7684 object { 'test/file': '7317399078361350034a7b769c6ea479ca1ebc4a' }\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" trees \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-blue\",children:\"flattenTree\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"currentTreeObj\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u5224\\u65ADhash\\u503C\\u662F\\u5426\\u53D8\\u5316\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"if\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"trees\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),\"relativeFilePath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"!==\"}),\" idx\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),\"relativeFilePath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"return\"}),\" \",(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"`\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"the following file has changes staged in the index => \"}),(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"${\"}),\"relativeFilePath\",(0,a.jsx)(e.span,{className:\"\",children:\"}\"})]}),(0,a.jsx)(e.span,{className:\"\",children:\"`\"})]}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"})]}),(0,a.jsx)(e.div,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u5220\\u9664\\u6587\\u4EF6\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  fs\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"unlinkSync\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"process\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"cwd\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" filePath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u66F4\\u65B0\\u7D22\\u5F15\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"delete\"}),\" idx\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),\"relativeFilePath\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-gray-400 italic\",children:\"// \\u5199\\u7D22\\u5F15\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"const\"}),\" indexStr \",(0,a.jsx)(e.span,{className:\"\",children:\"=\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"    \",(0,a.jsx)(e.span,{className:\"\",children:\"Object\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"keys\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"idx\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"      \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"map\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"\",children:\"k\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"=>\"}),\" \",(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"`\"}),(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"${\"}),\"idx\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),\"k\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"\",children:\"}\"})]}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\" 0 \"}),(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"${\"}),\"k\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"split\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"','\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"[\"}),(0,a.jsx)(e.span,{className:\"\",children:\"0\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"]\"}),(0,a.jsx)(e.span,{className:\"\",children:\"}\"})]}),(0,a.jsx)(e.span,{className:\"\",children:\"`\"})]}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"      \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"join\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'\\\\n'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),\" \",(0,a.jsx)(e.span,{className:\"\",children:\"+\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'\\\\n'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  fs\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"writeFileSync\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"path\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\".\"}),(0,a.jsx)(e.span,{className:\"\",children:\"resolve\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"(\"}),\"gitDir\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"'index'\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\",\"}),\" indexStr\",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\")\"}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"return\"}),\" \",(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"`\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"rm \"}),(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"${\"}),\"relativeFilePath\",(0,a.jsx)(e.span,{className:\"\",children:\"}\"})]}),(0,a.jsx)(e.span,{className:\"\",children:\"`\"})]}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"else\"}),\" \",(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"{\"})]}),(0,a.jsxs)(e.div,{className:\"code-line\",children:[\"  \",(0,a.jsx)(e.span,{className:\"text-code-purple\",children:\"return\"}),\" \",(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"`\"}),(0,a.jsx)(e.span,{className:\"text-code-green\",children:\"the following file has changes staged in the index => \"}),(0,a.jsxs)(e.span,{className:\"\",children:[(0,a.jsx)(e.span,{className:\"\",children:\"${\"}),\"relativeFilePath\",(0,a.jsx)(e.span,{className:\"\",children:\"}\"})]}),(0,a.jsx)(e.span,{className:\"\",children:\"`\"})]}),(0,a.jsx)(e.span,{className:\"text-code-white\",children:\";\"})]}),(0,a.jsx)(e.div,{className:\"code-line\",children:(0,a.jsx)(e.span,{className:\"text-code-white\",children:\"}\"})})]})}),`\n`,(0,a.jsxs)(e.h2,{id:\"\\u53C2\\u8003\\uFF1A\",children:[(0,a.jsx)(e.a,{href:\"#%E5%8F%82%E8%80%83%EF%BC%9A\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u53C2\\u8003\\uFF1A\"]}),`\n`,(0,a.jsxs)(e.ol,{children:[`\n`,(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:\"https://gitee.com/progit\",children:\"progit\"})}),`\n`,(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:\"http://gitlet.maryrosecook.com/docs/gitlet.html\",children:\"gitlet\"})}),`\n`]})]});return c?(0,a.jsx)(c,Object.assign({},s,{children:l})):l}var f=u;return b;})();\n;return Component.default;","toc":[{"value":"前置知识","url":"#前置知识","depth":2},{"value":"源码简单实现","url":"#源码简单实现","depth":2},{"value":"参考：","url":"#参考：","depth":2}],"frontMatter":{"readingTime":{"text":"2 min read","minutes":1.815,"time":108900,"words":363},"slug":"node实现一个简易git-rm/index","fileName":"node实现一个简易git-rm/index.md","title":"node实现一个简易git-rm","date":"2021-08-07T10:43:03.000Z","category":"git","tags":["2021","git"],"draft":false}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.145,"time":8700,"words":29},"slug":["default"],"fileName":"default.md","name":"Later","avatar":"/static/images/avatar.png","occupation":"前端开发工程师","company":"销售易","email":"474151949@qq.com","github":"https://github.com","date":null}],"prev":{"title":"node实现一个简易git-commit","date":"2021-08-07T10:00:03.000Z","category":"git","tags":["2021","git"],"draft":false,"slug":"node实现一个简易git-commit/index"},"next":null},"__N_SSG":true}